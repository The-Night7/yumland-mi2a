<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Livreur</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
<div class="delivery-app">
    <header class="app-header">
        <h2 style="margin:0;">LIVRAISON</h2>
        <small>Zone : Cergy Centre</small>
    </header>

    <main class="order-list" id="deliveries-container">
        <!-- Injection JS -->
    </main>

    <div style="height: 60px;"></div> <!-- Espace pour le menu bas -->

    <nav class="nav-bottom">
        <a href="#" class="nav-item active">Commandes</a>
        <a href="profil.html" class="nav-item">Mon Profil</a>
        <a href="../../index.html" class="nav-item">Quitter</a>
    </nav>
</div>

<script>
    const deliveries = [
        {
            id: 'CMD-002',
            client: 'M. Martin',
            address: '12 Rue du Port, Cergy',
            code: 'A123',
            floor: '3Ã¨me Ã©tage',
            tel: '06 01 02 03 04',
            comment: 'Sonner fort',
            status: 'ready',
            total: '22.50â‚¬'
        },
        {
            id: 'CMD-005',
            client: 'Mme. Durand',
            address: "5 Bd de l'Oise, Cergy",
            code: 'Interphone B',
            floor: '1er Ã©tage',
            tel: '06 05 06 07 08',
            comment: '',
            status: 'ready',
            total: '15.00â‚¬'
        }
    ];

    function renderDeliveries() {
        const container = document.getElementById('deliveries-container');
        if(deliveries.length === 0) {
            container.innerHTML = '<p style="text-align:center; padding:20px;">Aucune commande Ã  livrer.</p>';
            return;
        }

        container.innerHTML = deliveries.map(d => `
                <div class="delivery-card">
                    <div class="delivery-header">
                        <strong>${d.client}</strong>
                        <span class="badge">${d.total}</span>
                    </div>
                    <div class="address-box">
                        ğŸ“ ${d.address}<br>
                        ğŸ¢ Ã‰tage : ${d.floor || ''}<br>
                        ğŸ”‘ Code : <strong>${d.code}</strong><br>
                        ğŸ“ TÃ©l : ${d.tel || ''}<br>
                        ${d.comment ? `ğŸ’¬ Commentaire : ${d.comment}` : ''}
                    </div>
                    <div style="margin-bottom:10px; color:#666;">
                        ğŸ“¦ Commande #${d.id}
                    </div>
                    <button class="btn-map" onclick="openMap('${d.address}')">Ouvrir Maps/Waze</button>
                    <button class="btn-deliver" onclick="confirmDelivery('${d.id}')">TerminÃ©</button>
                </div>
            `).join('');
    }

    function confirmDelivery(id) {
        if(confirm('Avez-vous bien livrÃ© la commande ' + id + ' ?')) {
            // Simulation suppression
            const index = deliveries.findIndex(d => d.id === id);
            if(index > -1) {
                deliveries.splice(index, 1);
                renderDeliveries();
            }
        }
    }

    // Fonction pour ouvrir l'adresse dans une application de cartographie (Google Maps)
    function openMap(address) {
        const url = 'https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(address);
        window.open(url, '_blank');
    }

    document.addEventListener('DOMContentLoaded', renderDeliveries);
</script>
</body>
</html>